<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Will Hanley | Historical International Legal Computational</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This post documents how I transformed it and contains links to archived versions of the various stages of the transformation.">
  <meta name="author" content="Will Hanley">
  <meta name="generator" content="Hugo 0.115.3">

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://willhanley.net/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://willhanley.net/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://willhanley.net/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://willhanley.net/plugins/academic-icons/css/academicons.css ">
  
  <link rel="stylesheet" href="https://willhanley.net/plugins/fontawesome/css/brands.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://willhanley.net/css/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://willhanley.net/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://willhanley.net/images/favicon.png " type="image/x-icon">
  
  
  <meta property="og:image" content="https://willhanley.net/images/sezen.png" />
  
  <meta property="og:title" content="Transforming the Osmanlı Yer Adları" />
<meta property="og:description" content="This post documents how I transformed it and contains links to archived versions of the various stages of the transformation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willhanley.net/blog/2017-10-06-transforming-oya/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2017-10-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-10-06T00:00:00+00:00" />

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-ZYJGE3FQDN', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</head><body>
<!-- preloader start -->
<div class="preloader">
  <div class="loader">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- preloader end -->
<header class="navigation">
  <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="https://willhanley.net/"><img class="img-fluid" src="https://willhanley.net/images/logo.png" alt="Will Hanley | Historical International Legal Computational"></a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navogation"
      aria-controls="navogation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navogation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://willhanley.net/">Will Hanley | Historical International Legal Computational</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link text-uppercase text-dark dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            Content
          </a>
          <div class="dropdown-menu" >
            
            <a class="dropdown-item" href="https://willhanley.net/featured/datasets">Data</a>
            
            <a class="dropdown-item" href="https://willhanley.net/featured/tutorials">How to</a>
            
            <a class="dropdown-item" href="https://willhanley.net/featured/projects">Projects</a>
            
            <a class="dropdown-item" href="https://willhanley.net/featured/opinion">Writing</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://willhanley.net/blog">Blog</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-uppercase text-dark" href="https://willhanley.net/about">About</a>
        </li>
        
        
      </ul>
      
      <!-- search -->
      <form class="form-inline position-relative ml-lg-4" action="https://willhanley.net//search">
        <input class="form-control px-0 w-100" type="search" placeholder="Search" id="search-query" name="s">
        <button class="search-icon" type="submit"><i class="ti-search text-dark"></i></button>
      </form>
      
    </div>
  </nav>
</header>





<section class="section bg-secondary">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h4>Transforming the Osmanlı Yer Adları</h4>
      </div>
    </div>
  </div>
</section>



<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <ul class="list-inline d-flex justify-content-between py-3">
          <li class="list-inline-item"><i class="ti-user mr-2"></i>Post by Will Hanley</li>
          <li class="list-inline-item"><i class="ti-calendar mr-2"></i>Oct 06, 2017</li>
        </ul>
        <article class="content">
          <img src="https://willhanley.net/images/sezen.png" alt="post-thumb" class="img-fluid rounded float-left mr-5 mb-4">
          <p>The initial data for this gazetteer is a transformed version of Tahir Sezen&rsquo;s 1996 <a href="http://www.os-ar.com/osmanli_yer_isimleri.pdf">Osmanlı Yer Adları</a>. This post documents how I transformed it and contains links to archived versions of the various stages of the transformation.</p>
<h2 id="1-pdf-to-3-column-plain-text-spreadsheet">1. PDF to 3-column plain text spreadsheet</h2>
<p>The first step was to extract a workable table from the OCRed version of the PDF. I copied the text of the Sezen pdf and pasted it into a word processor document. Initially this was challenging, because the multiple lines of the tables were not conforming to the column arrangement when imported into a spreadsheet. It took me a while to figure out a method, as I couldn&rsquo;t seem to parse it by all caps or the alphabet switch. Luckily I realized that the font size of the Arabic-alphabet text differed. I used changes in font size to split the table into three columns: New alphabet name, old alphabet name, and a single field consisting of a long string describing the administrative classification of the place as well as the larger district containing it (Unvan ve Bağlı Olduğu Nahiye, Kaza, Sancak, Eyâlet veya Vilâyet). I used find and replace with the following regular expressions to create these tab-delineated lines:</p>
<ol>
<li>replace <code>$</code> with <code>#</code> (to remove all line breaks)</li>
<li>delete <code>##[0-9]*</code> (to remove page numbers)</li>
<li>replace <code>[[:::CharHeight=11::]]</code> with <code>\n&amp;</code> (to create a line break between each &ldquo;new alphabet&rdquo; administrative unit name, which are all given in 11pt font).</li>
<li>replace <code>[[:::CharHeight=12::]]</code> with <code>\t&amp;\t</code> (to create tabs before and after every &ldquo;old alphabet&rdquo; administrative unit name, which are given in 12 point foint).</li>
</ol>
<p>For some reason these find and replace operations took <em>forever</em> in Libreoffice. When I broke the document into 8,000 word chunks, it went a lot faster. I pasted the results into a spreadsheet and cleaned up a few errors manually. There were about 6400 records in the table that resulted, which is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-1.csv">Ottgaz-data-1</a></strong>.</p>
<h2 id="2-creating-columns">2. Creating columns</h2>
<p>The next step was to produce a single line for each place listed, with every associated unit class/district (unvan/bağlı) pair broken out. I used OpenRefine to parse the columns before and after the unvan names, which were quite standard and limited in number. Almost half of the units are associated with only one class/district pair, which is to say they were only located under one date. At the other extreme, Kozan has 14 (!) pairs, which is to say that (according to Sezen) its administrative status changed 14 times over the history of the Ottoman Empire. It took a bit more than a day to do this. This version is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-2.tsv">Ottgaz-data-2</a></strong>.</p>
<h2 id="3-breaking-districts-into-multiple-columns">3. Breaking districts into multiple columns</h2>
<p>Next I broke concatenated district entries (for example, İstefan→Sinop→Kastamonu→Kastamonu vilâyeti) into discrete ordered columns. This version (I think) is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-3.csv">Ottgaz-data-3</a></strong>.</p>
<h2 id="4-cleaning-and-standardizing">4. Cleaning and standardizing</h2>
<p>I then used <a href="http://openrefine.org/">OpenRefine</a> to format and clean the data. This was a laborious process, and went through several iterations. I&rsquo;ve archived all of these iterations as .tsv files and as OpenRefine projects, though I expect that they will be of little interest or use to anyone. This fourth iteration contains all of the bağlı hierarchical names in a single column, which is to say that it does not have a single row for each placename. It contains 38,465 rows. I used this method to standardize expressions of placenames and dates using OpenRefine&rsquo;s clustering tools. This version, comprising 885 edits, is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-4.tsv">Ottgaz-data-4</a></strong>.</p>
<h2 id="5-restructuring-column-hierarchy">5. Restructuring column hierarchy</h2>
<p>The fifth iteration contains only one line for every place, and begins to elaborate the hierarchical structure. It stretches to 80 columns. I standardized the bağlı hierarchical language (which contained a lot of errors, some of which remain no doubt). I have given each nesting bağlı place name its own column, so, for example, İstefan→Sinop→Kastamonu→Kastamonu vilâyeti becomes 4 columns. These are numbered in hierarchical sequence: &ldquo;Bağlı 1 1&rdquo; is the smallest district containing the place in question (İstefan in this example), and Bağlı 2 etc are larger units. I have also broken out dates into their own columns, and standardized the titles (unvanlar), which will form part of the ontology of the gazetteer. Finally, I have amalgamated &ldquo;unvan&rdquo; notes and &ldquo;bağlı&rdquo; notes (anything other than a district type or a placename) into a single &ldquo;notes&rdquo; column. This version, comprising 873 edits, is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-5.tsv">Ottgaz-data-5</a></strong>.</p>
<!-- raw HTML omitted -->
<h2 id="6-translation-of-headings">6. Translation of headings</h2>
<p>The sixth iteration converts the headings into English, and continues the cleaning and standardization. I reversed the numbering of the containing units, so now <code>Belongs_to_1-1</code> designates the largest unit. This version, comprising 454 edits, is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-6.tsv">Ottgaz-data-6</a></strong>.</p>
<h2 id="7-introduction-of-database-elements">7. Introduction of database elements</h2>
<p>The seventh iteration begins to implement some internal references, by adding a field for ID numbers, and beginning to reference IDs in the hierarchy. It also adds a <code>Place_type</code> field, differentiating between cities and regions, and an <code>Ott_or_not</code> field, a boolean category to isolate those records which situate the place in a hierarchy entirely outside of modern Turkey. This version, comprising 818 edits, is archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-7.tsv">Ottgaz-data-7</a></strong>.</p>
<h2 id="8-reconciliation-and-rdf-skeleton">8. Reconciliation and RDF skeleton</h2>
<p>The eighth iteration, which I&rsquo;m working on now, should be the last produced in OpenRefine. It integrates wikidata, geonames, and periodo references and contains an RDF skeleton. This version <em>will be</em> archived as <strong><a href="https://github.com/whanley/Ottoman-Gazetteer/blob/master/data/archived-versions/ottgaz-data-7.tsv">Ottgaz-data-8</a></strong>.</p>
<h1 id="rough-plans">Rough plans:</h1>
<ul>
<li>I will combine rows which refer to the same place (many places are listed twice, under different names).</li>
<li>I will give each administrative unit a number</li>
<li>I will align the dates with a periodization of sultan&rsquo;s epochs that I created on <a href="perio.do">PerioDo</a>.</li>
<li>I will substitute the appropriate number for each &ldquo;containing district&rdquo; (bağlı olduğu&hellip;) field</li>
<li>I will produce an RDF skeleton and export the data, conforming to the Pelagios <a href="https://github.com/pelagios/pelagios-cookbook/wiki/Pelagios-Gazetteer-Interconnection-Format">Gazetteer Interchange Format</a></li>
<li>I will wrangle this onto the [ottgaz.org] server, using <a href="http://r.duckduckgo.com/l/?kh=-1&amp;uddg=http%3A%2F%2Faksw.org%2FProjects%2FOntoWiki">OntoWiki</a> at least initially</li>
</ul>

        </article>
      </div>
      <div class="col-lg-4">
  <div class="widget search-box">
    <form action="https://willhanley.net//search">
      <i class="ti-search"></i>
      <input class="form-control border-0 pl-5" type="search" placeholder="Search" id="search-query" name="s">
    </form>
  </div>
  <div class="widget">
    <h6 class="mb-4">LATEST POST</h6>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://willhanley.net/blog/2022-09-16-tpd-militarization/"><img class="mr-3 post-thumb-sm" src="https://willhanley.net/images/revell-twitter.jpg"></a>
      </div>
      <div class="media-body">
        <ul class="list-inline d-flex justify-content-between mb-2">
          <li class="list-inline-item">Post By Will Hanley</li>
          <li class="list-inline-item">Sep 21, 2022</li>
        </ul>
        <h6><a class="text-dark" href="https://willhanley.net/blog/2022-09-16-tpd-militarization/">TPD needs a culture of accountability</a></h6>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://willhanley.net/blog/2021-05-23-fsu-president/"><img class="mr-3 post-thumb-sm" src="https://willhanley.net/images/fsu-revenues.png"></a>
      </div>
      <div class="media-body">
        <ul class="list-inline d-flex justify-content-between mb-2">
          <li class="list-inline-item">Post By Will Hanley</li>
          <li class="list-inline-item">May 23, 2021</li>
        </ul>
        <h6><a class="text-dark" href="https://willhanley.net/blog/2021-05-23-fsu-president/">John Thrasher should be Florida State&#39;s last politician president</a></h6>
      </div>
    </div>
    
    <div class="media mb-4">
      <div class="post-thumb-sm mr-3">
        <a href="https://willhanley.net/blog/2020-11-18-cabinet-to-wikidata/"><img class="mr-3 post-thumb-sm" src="https://willhanley.net/images/1939-cabinet.jpg"></a>
      </div>
      <div class="media-body">
        <ul class="list-inline d-flex justify-content-between mb-2">
          <li class="list-inline-item">Post By Will Hanley</li>
          <li class="list-inline-item">Nov 18, 2020</li>
        </ul>
        <h6><a class="text-dark" href="https://willhanley.net/blog/2020-11-18-cabinet-to-wikidata/">Egypt&#39;s cabinets in Wikidata</a></h6>
      </div>
    </div>
    
  </div>
  <div class="widget">
    <h6 class="mb-4">TAG</h6>
    <ul class="list-inline tag-list">
      <li class="list-inline-item m-1"><a href="/tags/archived">Archived</a></li>
      <li class="list-inline-item m-1"><a href="/tags/charter-schools">Charter schools</a></li>
      <li class="list-inline-item m-1"><a href="/tags/consolidation">Consolidation</a></li>
      <li class="list-inline-item m-1"><a href="/tags/cycling">Cycling</a></li>
      <li class="list-inline-item m-1"><a href="/tags/dating">Dating</a></li>
      <li class="list-inline-item m-1"><a href="/tags/documentation">Documentation</a></li>
      <li class="list-inline-item m-1"><a href="/tags/duplication">Duplication</a></li>
      <li class="list-inline-item m-1"><a href="/tags/egypt">Egypt</a></li>
      <li class="list-inline-item m-1"><a href="/tags/florida">Florida</a></li>
      <li class="list-inline-item m-1"><a href="/tags/fsu">Fsu</a></li>
      <li class="list-inline-item m-1"><a href="/tags/github">Github</a></li>
      <li class="list-inline-item m-1"><a href="/tags/grel">Grel</a></li>
      <li class="list-inline-item m-1"><a href="/tags/indexes">Indexes</a></li>
      <li class="list-inline-item m-1"><a href="/tags/international-law">International law</a></li>
      <li class="list-inline-item m-1"><a href="/tags/metadata">Metadata</a></li>
      <li class="list-inline-item m-1"><a href="/tags/ocr">Ocr</a></li>
      <li class="list-inline-item m-1"><a href="/tags/openrefine">Openrefine</a></li>
      <li class="list-inline-item m-1"><a href="/tags/ottgaz">Ottgaz</a></li>
      <li class="list-inline-item m-1"><a href="/tags/periodo">Periodo</a></li>
      <li class="list-inline-item m-1"><a href="/tags/police">Police</a></li>
      <li class="list-inline-item m-1"><a href="/tags/politics">Politics</a></li>
      <li class="list-inline-item m-1"><a href="/tags/publications">Publications</a></li>
      <li class="list-inline-item m-1"><a href="/tags/schema">Schema</a></li>
      <li class="list-inline-item m-1"><a href="/tags/sezen">Sezen</a></li>
      <li class="list-inline-item m-1"><a href="/tags/syllabus">Syllabus</a></li>
      <li class="list-inline-item m-1"><a href="/tags/tallahassee">Tallahassee</a></li>
      <li class="list-inline-item m-1"><a href="/tags/teaching">Teaching</a></li>
      <li class="list-inline-item m-1"><a href="/tags/terrorism">Terrorism</a></li>
      <li class="list-inline-item m-1"><a href="/tags/traffic">Traffic</a></li>
      <li class="list-inline-item m-1"><a href="/tags/turkey">Turkey</a></li>
      <li class="list-inline-item m-1"><a href="/tags/tutorial">Tutorial</a></li>
      <li class="list-inline-item m-1"><a href="/tags/wikidata">Wikidata</a></li>
    </ul>
  </div>
  <div class="widget">
    <h6 class="mb-4">CATEGORIES</h6>
    <ul class="list-inline tag-list">
      <li class="list-inline-item m-1"><a href="/categories/computational-methods">Computational methods</a></li>
      <li class="list-inline-item m-1"><a href="/categories/datasets">Datasets</a></li>
      <li class="list-inline-item m-1"><a href="/categories/how-to">How to</a></li>
      <li class="list-inline-item m-1"><a href="/categories/opinion">Opinion</a></li>
      <li class="list-inline-item m-1"><a href="/categories/projects">Projects</a></li>
    </ul>
  </div>
</div>
    </div>
  </div>
</section>






<footer class="bg-secondary">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <a href="https://willhanley.net/"><img src="https://willhanley.net/images/logo.png" alt="Will Hanley | Historical International Legal Computational" class="img-fluid"></a>
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          
          <h6>Address</h6>
          <ul class="list-unstyled">
            <li class="font-secondary text-dark">440 Bellamy, 113 Collegiate Loop Tallahassee FL 32306-2200</li>
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
                   
          <h6>Contact Info</h6>
          <ul class="list-unstyled">
            
            <li class="font-secondary text-dark">Tel : 850 912 9143</li>
            
                       
            <li class="font-secondary text-dark">Email : <a href="mailto:whanley@pm.me">whanley@pm.me</a></li>
            
          </ul>
          
        </div>
        <div class="col-md-3 col-sm-6 mb-4 mb-md-0">
          <h6>Follow</h6>
          <ul class="list-inline d-inline-block">
            
            <li class="list-inline-item"><a href="https://scholar.social/@whanley" class="text-dark"><i class="fa-brands fa-mastodon"></i></a></li>
            
            <li class="list-inline-item"><a href="https://github.com/whanley" class="text-dark"><i class="ti-github"></i></a></li>
            
            <li class="list-inline-item"><a href="https://orcid.org/0000-0002-1832-6805" class="text-dark"><i class="ai ai-orcid"></i></a></li>
            
            <li class="list-inline-item"><a href="https://zenodo.org/search?page=1&amp;size=20&amp;q=owners:%2020288&amp;sort=-publication_date" class="text-dark"><i class="ai ai-zenodo"></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center pb-3">
    <p class="mb-0">Copyright CC BY-NC-SA 4.0</p>
  </div>
</footer>


<!-- JS Plugins -->

<script src="https://willhanley.net/plugins/jQuery/jquery.min.js"></script>

<script src="https://willhanley.net/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://willhanley.net/plugins/slick/slick.min.js"></script>

<script src="https://willhanley.net/plugins/headroom/headroom.js"></script>

<script src="https://willhanley.net/plugins/instafeed/instafeed.min.js"></script>

<script src="https://willhanley.net/plugins/masonry/masonry.js"></script>

<script src="https://willhanley.net/plugins/reading-time/readingTime.min.js"></script>

<script src="https://willhanley.net/plugins/smooth-scroll/smooth-scroll.js"></script>

<script src="https://willhanley.net/plugins/search/fuse.min.js"></script>

<script src="https://willhanley.net/plugins/search/mark.js"></script>

<script src="https://willhanley.net/plugins/search/search.js"></script>


<!-- Main Script -->

<script src="https://willhanley.net/js/script.min.js"></script>




</body>
</html>